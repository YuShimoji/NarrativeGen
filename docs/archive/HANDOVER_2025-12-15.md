# 作業申し送り: 2025-12-15

## 作業概要
NarrativeGen プロジェクトの継続開発作業。主に lexicon (言い換え辞書) の UX 改善、Ajv 検証統合、runtime同期の実装、および Packages/ ディレクトリの大文字小文字統一。

## 現在の状況
- ブランチ: lexicon-ux-ajv-packages-casing
- PR: https://github.com/YuShimoji/NarrativeGen/pull/64 (作成済み、追加コミットもpush済み)
- ビルド・テスト: 完了。A2の回帰スモークテスト(Puppeteer)結果をdocsに記録。

## 実装済み変更
### 1. Lexicon 機能拡張
- Designer-extendable paraphrase lexicon 実装。
- Engine に runtime lexicon 管理機能追加 (get/set 関数、per-call overrides)。
- Web Tester に designer lexicon editor UI 追加 (AI パネル: load/merge/replace/import/export ボタン、textarea、file input)。
- Lexicon は localStorage に永続化、GUI paraphrase (modal variant selection) に適用。
- English/Japanese defaults 拡張 (designer addition が核心)。

### 2. 品質改善
- Lexicon quick-add 機能 (GUI 内)。
- Model-embedded lexicon (meta.paraphraseLexicon) 実装、schema 拡張。
- Lexicon JSON schema 追加。
- Sidebar toggle button に tooltip 追加 (clarity向上)。

### 3. インフラ・運用改善
- Packages/ ディレクトリの大文字小文字統一 (Linux/CI 失敗回避)。
- 更新対象: web-tester imports, Vite config, workspace file dependency, CI, docs。
- docs/reference.md を SSOT として作成 (spec v1.1 draft: nodeType/passage/choice, next, onEnter, GUI mappings)。

### 4. ドキュメント・テスト
- docs/reference.md 作成。
- A2 回帰スモークテスト結果を docs に記録。
- ビルド・テスト完了。spec v1.1 と GUI v2 準備完了。

## 調査内容
- Project NarrativeGen の更新履歴確認。
- Lexicon 機能の要件分析: runtime 管理、designer拡張性。
- UI/UX 改善点: quick-add, tooltip, persistence。
- インフラ問題: Packages/ casing (Linux/CI 互換性)。
- テスト手順: Puppeteer スモークテスト。
- ドキュメント SSOT: reference.md の位置づけ。

## 次回作業再開ポイント
- PR #64 のレビュー・merge。
- 新ブランチで spec v1.1 と GUI v2 の実装。
- 追加機能: lexicon JSON schema の完全検証、model-embedded lexicon の統合テスト。

## 注意事項
- コマンド実行は承認済み。自動実行可。
- 変更反映後、git log とリモート確認でダブルチェック。
- AI_CONTEXT.md を更新し、次の中断可能点・決定事項・Backlog を記録。

## 連絡先・引き継ぎ
引き継ぎ担当: 次回作業者。
最終更新: 2025-12-15 by Cascade/Windsurf AI。
