# Nodeフィーチャー分析と今後の方向性

## 概要
Nodeフィーチャーについて、現在の目的と将来の可能性を分析し、v1.1仕様との整合性を確認する。

## 現在のNodeフィーチャーの目的
Nodeフィーチャーは、ストーリー構築のための補助機能として設計されている。

### 明確な目的
- ストーリー作成時の効率化支援
- ノード間の関係性の視覚化
- ワークフローの改善

### 混乱の原因
- ストーリービルダーと関係性マッピングの境界が曖昧
- 機能の目的が複数あるように見える

## v1.1仕様との整合性

### 現在のv1.1仕様
- `nodeType`: passage, choice, next の3タイプ
- `passage`: テキスト表示ノード
- `choice`: 選択肢ノード
- `next`: 自動遷移ノード

### Nodeフィーチャーの役割
Nodeフィーチャーは、GUIでのノード作成・編集を支援する機能として位置づけられるべき。

## 推奨される機能分離

### 1. ストーリービルダー（メイン機能）
- ノードの作成・編集
- 選択肢の設定
- 遷移の定義
- 条件・効果の設定

### 2. 関係性マッピング（補助機能）
- ノード間の依存関係表示
- フラグ/リソースの使用状況
- 到達可能性分析
- デバッグ支援

## 今後の実装方針

### Phase 1: 機能明確化
- Nodeフィーチャーをストーリービルダーに特化
- 関係性マッピングは別機能として分離検討

### Phase 2: Mermaid統合
- Mermaidプレビューとの連携
- リアルタイム更新
- インタラクティブ編集

### Phase 3: 高度な分析機能
- フローの自動最適化
- エラーの自動検出
- パフォーマンス分析

## 結論
Nodeフィーチャーはv1.1仕様に準拠しつつ、ストーリー構築の効率化に特化した機能として進化させる。関係性マッピングの要素は、Mermaidプレビュー機能でカバー可能であり、重複を避けるため統合を検討する。