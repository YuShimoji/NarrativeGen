# Task: マルチエンディング可視化機能実装

Status: CLOSED
Tier: 2
Branch: main
Owner: Worker
Created: 2026-01-05T01:15:00Z
Report: docs/inbox/REPORT_TASK_017_20260105_0127.md

## Objective

マルチエンディング可視化機能を実装する。全エンディングパスを自動抽出し、ツリー構造で表示する。各エンディングへの到達条件も表示する。

## Context

- Phase 4のプレビュー＆検証機能の一部として計画されている
- リアルタイムプレビューパネルとモデル検証ツールは実装済み
- マルチエンディング可視化は未実装
- 複数のエンディングがあるストーリーの可視化により、ストーリー構造の理解が容易になる
- `docs/NEXT_PHASE_PROPOSAL.md`の「Phase 4: プレビュー＆検証機能」に記載されている

## Focus Area

- `apps/web-tester/src/ui/gui-editor.js`: マルチエンディング可視化機能の追加
- エンディングパス抽出アルゴリズムの実装（BFS/DFS）
- ツリー構造表示の実装
- 到達条件表示の実装

## Forbidden Area

- 既存のリアルタイムプレビューパネルの破壊的変更（拡張のみ）
- 既存のモデル検証ツールの破壊的変更

## Constraints

- 既存のリアルタイムプレビューパネルに統合するか、別パネルとして実装する
- エンディングパス抽出は効率的なアルゴリズム（BFS/DFS）を使用
- 到達条件は既存の条件評価ロジックを再利用
- 大規模モデル（500ノード以上）でもパフォーマンスを維持する

## DoD

- [ ] エンディングパス抽出アルゴリズムの実装（BFS/DFSで全エンディングパスを抽出）
- [ ] ツリー構造表示の実装（エンディングパスをツリー構造で表示）
- [ ] 到達条件表示の実装（各エンディングへの到達条件を表示）
- [ ] UI統合（リアルタイムプレビューパネルに統合、または別パネルとして実装）
- [ ] サンプルモデル（multiple_endings.json等）で動作確認
- [ ] docs/inbox/ にレポート（REPORT_TASK_017_*.md）が作成されている
- [ ] 本チケットの Report 欄にレポートパスが追記されている

## Notes

- エンディングノードの判定ロジックは既存の`ModelValidator`を参考にする
- 到達条件の評価は既存の条件評価ロジック（`engine-ts`）を再利用する
- ツリー構造表示は既存のリアルタイムプレビューパネルのスタイルを参考にする
