# 短期タスク詳細 (1-2週間)

**作成日**: 2026-02-07  
**期間**: 2026-02-07 〜 2026-02-21

---

## 📋 タスク一覧

| タスクID | タイトル | 優先度 | 工数 | 依存関係 |
|----------|----------|--------|------|----------|
| TASK_029 | 高度ショートカット実装 | 高 | 2-3日 | なし |
| TASK_030 | エクスポート検証・拡張 | 高 | 1-2日 | TASK_028 |
| TASK_031 | 手動テスト実施 | 高 | 2-3日 | なし |
| TASK_032 | Undo/Redo 確認 | 中 | 1-2日 | TASK_018, TASK_024 |

---

## TASK_029: 高度ショートカット実装

**Status**: OPEN  
**Tier**: 2  
**Branch**: feature/advanced-shortcuts  
**Owner**: Worker  
**Created**: 2026-02-07  
**Extends**: TASK_026

### 目的

GUI エディタのワークフロー効率を向上させる高度なキーボードショートカットを実装する。

### 実装内容

#### 1. ノード複製 (Ctrl+D)

```javascript
// 期待される動作
- 選択中のノードを複製
- 新ノードは元位置からオフセット (x+50, y+50)
- 新ノード ID は自動採番 (`original_copy`, `original_copy2`, ...)
- 複製後は新ノードを選択状態に
```

#### 2. ノード削除 (Delete / Backspace)

```javascript
// 期待される動作
- 選択中のノードを削除
- 複数選択時は一括削除
- 削除前に確認ダイアログ (オプション)
- 関連エッジも自動削除
```

#### 3. 検索フォーカス (Ctrl+F)

```javascript
// 期待される動作
- 検索入力ボックスにフォーカス
- ブラウザ標準の検索ダイアログを抑制 (preventDefault)
- 既に検索ボックスにフォーカス時はテキスト全選択
```

#### 4. パンモード (Space)

```javascript
// 期待される動作
- Space 押下中はパンモード (ドラッグでキャンバス移動)
- Space 離すと元のモード (選択モード) に復帰
- カーソルアイコン切り替え (default ⇄ grab)
```

### 対象ファイル

- `apps/web-tester/src/ui/KeyBindingManager.js`
- `apps/web-tester/src/ui/GraphEditorManager.js`
- `apps/web-tester/src/ui/SearchManager.js`

### DoD (完了定義)

- [ ] Ctrl+D で選択ノード複製
- [ ] Delete/Backspace で選択ノード削除
- [ ] Ctrl+F で検索ボックスフォーカス
- [ ] Space 長押しでパンモード
- [ ] Undo/Redo 対応
- [ ] テストケース追加
- [ ] `docs/GUI_EDITOR_TEST_GUIDE.md` 更新

---

## TASK_030: エクスポート機能検証・拡張

**Status**: OPEN  
**Tier**: 2  
**Branch**: main  
**Owner**: Worker  
**Created**: 2026-02-07  
**Depends**: TASK_028

### 目的

TASK_028 で実装したエクスポート機能の動作検証と追加フォーマットの検討。

### 検証内容

#### Twine (Twee) エクスポート

```
検証手順:
1. Web Tester でモデルを読み込み
2. 「Export...」→ Twine を選択
3. 出力ファイルを Twine 2 でインポート
4. フロー・選択肢が正しく表示されることを確認
```

#### Ink エクスポート

```
検証手順:
1. Web Tester でモデルを読み込み
2. 「Export...」→ Ink を選択
3. 出力ファイルを Inky でコンパイル
4. エラーなくコンパイルできることを確認
5. フロー・選択肢が正しく動作することを確認
```

### 今後の拡張検討

- [ ] PDF フローチャート (graphviz/mermaid-cli)
- [ ] Yarn Spinner フォーマット
- [ ] Excel (XLSX) 出力

### DoD

- [ ] Twine エクスポート動作確認済み
- [ ] Ink エクスポート動作確認済み
- [ ] 検証レポート作成
- [ ] バグ発見時は Issue 起票

---

## TASK_031: 手動テスト実施

**Status**: OPEN  
**Tier**: 1  
**Branch**: main  
**Owner**: Worker  
**Created**: 2026-02-07

### 目的

`docs/GUI_EDITOR_TEST_GUIDE.md` に沿った手動テストの実施と結果記録。

### テスト項目

#### 1. コピー＆ペースト

| ケース | 期待結果 | 結果 |
|--------|----------|------|
| 単一ノード Ctrl+C → Ctrl+V | ノード複製、ID 自動採番 | [ ] |
| 複数ノード選択してコピー | 全選択ノード複製 | [ ] |
| 選択肢含むノードコピー | 選択肢も含めて完全コピー | [ ] |

#### 2. 検索・フィルタ

| ケース | 期待結果 | 結果 |
|--------|----------|------|
| ID 検索 | 部分一致でフィルタ | [ ] |
| テキスト検索 | 本文検索 | [ ] |
| 到達不能フィルタ | 到達不能ノードのみ表示 | [ ] |
| 孤立ノードフィルタ | 孤立ノードのみ表示 | [ ] |

#### 3. スニペット機能

| ケース | 期待結果 | 結果 |
|--------|----------|------|
| スニペット保存 | localStorage 保存 | [ ] |
| スニペット挿入 | ノード構成再現 | [ ] |
| スニペット削除 | リストから削除 | [ ] |

#### 4. リアルタイムプレビュー

| ケース | 期待結果 | 結果 |
|--------|----------|------|
| ノード選択時 | プレビュー更新 | [ ] |
| テキスト編集時 | 即時反映 | [ ] |
| 選択肢クリック | 遷移先へジャンプ | [ ] |

### DoD

- [ ] 全テストケース実施
- [ ] 結果記録
- [ ] バグ発見時は Issue 起票
- [ ] レポート作成: `docs/reports/REPORT_TASK_031_ManualTest.md`

---

## TASK_032: Undo/Redo 完全実装確認

**Status**: OPEN  
**Tier**: 2  
**Branch**: main  
**Owner**: Worker  
**Created**: 2026-02-07  
**Depends**: TASK_018, TASK_024

### 目的

TASK_018, TASK_024 で実装した Undo/Redo が全アクションで正しく動作することを確認。

### 確認対象アクション

| アクション | Undo | Redo | 結果 |
|------------|------|------|------|
| ノード追加 | 削除 | 再追加 | [ ] |
| ノード削除 | 復元 | 再削除 | [ ] |
| ノード複製 | 削除 | 再複製 | [ ] |
| テキスト編集 | 元に戻す | やり直す | [ ] |
| 選択肢追加 | 削除 | 再追加 | [ ] |
| 選択肢削除 | 復元 | 再削除 | [ ] |
| ノード移動 | 元位置 | 新位置 | [ ] |

### DoD

- [ ] 全アクションの Undo/Redo 動作確認
- [ ] 未対応アクション発見時は Issue 起票
- [ ] レポート作成

---

## 📊 スケジュール

```
Week 1 (2/7-2/14):
├── TASK_029: 高度ショートカット (2-3日)
├── TASK_031: 手動テスト (並行, 2-3日)

Week 2 (2/14-2/21):
├── TASK_030: エクスポート検証 (1-2日)
├── TASK_032: Undo/Redo 確認 (1-2日)
└── バッファ / バグ修正
```

---

*最終更新: 2026-02-07*
