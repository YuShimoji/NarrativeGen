# Phase 1 実装機能テストガイド

## テスト対象機能

1. SVGアイコンシステム
2. カラーパレット機能
3. クイックノード作成
4. 選択肢一括編集

---

## 事前準備

### 開発サーバー起動

```powershell
cd apps\web-tester
npm run dev
```

ブラウザで `http://localhost:5173` にアクセス

---

## テスト1: SVGアイコンシステム

### 確認項目

**ストーリータブ:**
- [ ] モデルラベルにbook-openアイコンが表示
- [ ] 実行ボタンにplayアイコンが表示
- [ ] カスタム読込ボタンにfolder-openアイコンが表示
- [ ] 編集ボタンにeditアイコンが表示
- [ ] JSON保存ボタンにsaveアイコンが表示
- [ ] プレビューボタンにeyeアイコンが表示
- [ ] CSV読込ボタンにuploadアイコンが表示
- [ ] CSV出力ボタンにdownloadアイコンが表示
- [ ] サイドバーボタンにsidebarアイコンが表示

**ノードグラフタブ:**
- [ ] 全体表示ボタンにmaximizeアイコンが表示
- [ ] リセットボタンにrefreshアイコンが表示
- [ ] 設定ボタンにsettingsアイコンが表示

**GUIエディタモード:**
- [ ] クイックノード作成ボタンにplusアイコンが表示

**ヘッダー:**
- [ ] テーマボタンにpaletteアイコンが表示

### 期待結果
- すべてのボタンにSVGアイコンが表示される
- 絵文字が残っていない
- アイコンが統一されたスタイルで表示される

---

## テスト2: カラーパレット機能

### 手順

1. ヘッダー右上の「テーマ」ボタンをクリック
2. カラーパレット選択モーダルが開く
3. 各パレットをクリックして確認

### 確認項目

**デフォルトパレット（紫グラデーション）:**
- [ ] 背景グラデーションが紫系
- [ ] ボタンが青系

**ミニマルグレー:**
- [ ] 背景グラデーションがグレー系
- [ ] ボタンがグレー系

**フォレストグリーン:**
- [ ] 背景グラデーションが緑系
- [ ] ボタンが緑系

**オーシャンブルー:**
- [ ] 背景グラデーションが青系
- [ ] ボタンが青系

**サンセットオレンジ:**
- [ ] 背景グラデーションがオレンジ系
- [ ] ボタンがオレンジ系

**ラベンダーパープル:**
- [ ] 背景グラデーションが薄紫系
- [ ] ボタンが紫系

### 永続性テスト

1. 任意のパレットを選択
2. ページをリロード（F5）
3. [ ] 選択したテーマが維持されている

### 期待結果
- 各パレットでテーマが正しく変更される
- 配色が統一されて見やすい
- 選択したテーマがローカルストレージに保存される

---

## テスト3: クイックノード作成

### 前提条件
サンプルモデル（例：`linear.json`）を読み込み、「編集」ボタンでGUIエディタモードに入る

### 手順1: ボタンから作成

1. 「クイックノード作成」ボタンをクリック
2. モーダルが開く
3. テンプレートを「会話」に設定
4. ノードテキストに「テストノード」と入力
5. 「作成」ボタンをクリック

### 確認項目

- [ ] モーダルが開く
- [ ] テンプレート選択が機能する
- [ ] ノードIDフィールドがある（空欄で自動生成）
- [ ] ノードテキストフィールドがある
- [ ] 「作成」ボタンで新ノードが追加される
- [ ] ノードリストに新ノードが表示される
- [ ] ステータスに成功メッセージが表示される

### 手順2: キーボードショートカットから作成

1. GUIエディタモード内で `N` キーを押す
2. モーダルが開く
3. テンプレートを「選択」に設定
4. ノードIDに「test_choice」と手動入力
5. 「作成」ボタンをクリック

### 確認項目

- [ ] `N` キーでモーダルが開く
- [ ] 手動入力したIDが使用される
- [ ] 選択テンプレートで2つの選択肢が自動作成される

### 手順3: テンプレート確認

各テンプレートで1個ずつノードを作成し、内容を確認：

**会話:**
- [ ] デフォルトテキスト：「会話テキストをここに入力」
- [ ] 選択肢なし

**選択:**
- [ ] デフォルトテキスト：「選択肢の説明をここに入力」
- [ ] 2つの選択肢が自動作成される

**情報:**
- [ ] デフォルトテキスト：「状況説明をここに入力」
- [ ] 選択肢なし

**アクション:**
- [ ] デフォルトテキスト：「イベントの説明をここに入力」
- [ ] 選択肢なし

**空白:**
- [ ] デフォルトテキスト：空
- [ ] 選択肢なし

### エラーケーステスト

1. 既存ノードと同じIDを手動入力
2. 「作成」ボタンをクリック
3. [ ] エラーメッセージが表示される
4. [ ] ノードが作成されない

---

## テスト4: 選択肢一括編集

### 前提条件
- サンプルモデル（`branching_flags.json`推奨）を読み込み
- GUIエディタモードに入る

### 手順

1. 「選択肢一括編集」ボタンをクリック
2. モーダルが開く
3. ノード選択ドロップダウンから選択肢を持つノードを選択
4. 選択肢リストが表示される
5. 「共通条件を適用」チェックボックスをオン
6. 条件テキストに「flag:test=true」と入力
7. 「一括適用」ボタンをクリック

### 確認項目

**UI:**
- [ ] モーダルが開く
- [ ] ノード選択ドロップダウンにノードリストが表示される
- [ ] ノード選択で選択肢リストが更新される
- [ ] 選択肢が読みやすく表示される
- [ ] 共通条件チェックボックスが機能する
- [ ] 共通効果チェックボックスが機能する
- [ ] チェックで入力フィールドが有効化される

**機能:**
- [ ] 選択したノードの選択肢に条件が追加される
- [ ] 成功メッセージが表示される
- [ ] モーダルが閉じる

### 複数設定テスト

1. 同じノードで再度一括編集を開く
2. 「共通効果を適用」もチェック
3. 効果テキストに「setFlag:completed=true」と入力
4. 「一括適用」をクリック

### 確認項目

- [ ] 条件と効果が両方適用される
- [ ] 既存の条件に追加される（上書きされない）

### エラーケーステスト

1. ノードを選択せずに「一括適用」をクリック
2. [ ] エラーメッセージが表示される

---

## 統合テスト: ワークフロー全体

### シナリオ：新規ストーリーを効率的に作成

1. デフォルトモデルを読み込む
2. テーマを「ミニマルグレー」に変更
3. GUIエディタモードに入る
4. クイックノードで「開始ノード」を作成（会話テンプレート）
5. クイックノードで「選択ノード」を作成（選択テンプレート）
6. 選択肢一括編集で共通条件を設定
7. 「保存して適用」をクリック
8. ストーリータブに戻る
9. 作成したストーリーを実行

### 確認項目

- [ ] すべての機能がスムーズに連携する
- [ ] テーマ変更が全画面に適用される
- [ ] 作成したノードが正しく動作する
- [ ] UIが直感的で使いやすい

---

## パフォーマンステスト

### 大規模モデルでのテスト

1. 50ノード以上のモデルを読み込む
2. カラーパレットを切り替える
3. クイックノードを10個連続作成
4. 選択肢一括編集を複数ノードで実行

### 確認項目

- [ ] UIの応答速度が許容範囲内（<1秒）
- [ ] メモリリークが発生しない
- [ ] ブラウザがフリーズしない

---

## ブラウザ互換性テスト

以下のブラウザで基本動作を確認：

### Chrome
- [ ] SVGアイコン表示
- [ ] カラーパレット動作
- [ ] クイックノード作成動作
- [ ] 選択肢一括編集動作

### Firefox
- [ ] SVGアイコン表示
- [ ] カラーパレット動作
- [ ] クイックノード作成動作
- [ ] 選択肢一括編集動作

### Edge
- [ ] SVGアイコン表示
- [ ] カラーパレット動作
- [ ] クイックノード作成動作
- [ ] 選択肢一括編集動作

---

## バグ報告テンプレート

問題を発見した場合、以下の情報を記録：

```
【問題の概要】


【再現手順】
1. 
2. 
3. 

【期待される動作】


【実際の動作】


【環境情報】
- OS: 
- ブラウザ: 
- バージョン: 

【スクリーンショット】
（あれば）

【追加情報】

```

---

## テスト完了チェックリスト

- [ ] SVGアイコンが全て正しく表示される
- [ ] カラーパレット6種類すべて動作する
- [ ] カラーパレットが永続化される
- [ ] クイックノード作成がボタンで動作する
- [ ] クイックノード作成がキーボードで動作する
- [ ] 5種類のテンプレートすべてが動作する
- [ ] 選択肢一括編集が動作する
- [ ] 共通条件・効果が正しく適用される
- [ ] 統合ワークフローがスムーズに動作する
- [ ] 主要ブラウザで互換性確認完了

---

## 次のステップ

テスト完了後：
1. バグがあれば修正
2. ユーザーフィードバック収集
3. Phase 2（Mermaid風グラフエディタ）の詳細設計へ進む
