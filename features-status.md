# 機能実装状況表

**最終更新**: 2026-01-23

## 🎯 現在利用可能な機能

### 基本機能

| 機能名 | 実装状況 | 説明 | 使用方法 |
|--------|----------|------|----------|
| モデル読み込み | ✅ 完了 | サンプルモデル選択・ファイルドロップ | Web Tester → モデル選択 |
| セッション開始 | ✅ 完了 | モデルからゲームセッションを開始 | 「セッションを開始」ボタン |
| 選択肢実行 | ✅ 完了 | 選択肢を選んで物語を進行 | 選択肢ボタンをクリック |
| 状態表示 | ✅ 完了 | 現在のノード、フラグ、リソースを表示 | リアルタイム表示 |
| CSV エクスポート | ✅ 完了 | モデルをCSV形式でエクスポート | 「CSVエクスポート」ボタン |
| 保存/読み込み | ✅ 完了 | SaveManager による状態永続化・自動保存 | 保存/読込ボタン |

### GUI エディタ

| 機能名 | 実装状況 | 説明 | 使用方法 |
|--------|----------|------|----------|
| ノード編集 | ✅ 完了 | ノードのテキストと選択肢を編集 | 「編集」ボタン → GUI編集モード |
| ノード追加/削除 | ✅ 完了 | ノードの追加・削除 | 編集モードのボタン |
| コピー＆ペースト | ✅ 完了 | ノードの複製 | Ctrl+C / Ctrl+V |
| 検索・フィルタ | ✅ 完了 | ノードID/テキスト検索、到達不能/孤立ノード等のフィルタ | 検索ボックス・フィルタドロップダウン |
| スニペット | ✅ 完了 | ノード構成の保存・再利用 | 「スニペット」ボタン |
| カスタムテンプレート | ✅ 完了 | ノードテンプレートの保存・利用 | クイックノード作成モーダル |
| リアルタイムプレビュー | ✅ 完了 | 選択ノードの即時プレビュー | 右側プレビューパネル |
| モデル検証 | ✅ 完了 | 自己参照/デッドエンド/未定義フラグ検出 | 「検証」ボタン |
| DnD 並べ替え | ✅ 完了 | ノード・選択肢のドラッグ並べ替え | ドラッグ操作 |
| 条件/効果エディタ | ✅ 完了 | 構造化された条件・効果設定UI | 選択肢の条件/効果セクション |
| 編集保存 | ✅ 完了 | 編集内容をJSONとして保存 | 「JSON保存」ボタン |

### Mermaid プレビュー

| 機能名 | 実装状況 | 説明 | 使用方法 |
|--------|----------|------|----------|
| ダイアグラム表示 | ✅ 完了 | シーン遷移のフローチャート表示 | M キー |
| リアルタイム更新 | ✅ 完了 | セッション開始・選択肢選択時に自動更新 | 自動 |
| 特殊文字エスケープ | ✅ 完了 | `[]{}<>"` 等の安全な表示 | 自動 |
| 予約語回避 | ✅ 完了 | `end` 等のMermaid予約語を自動エスケープ | 自動 |

### キーバインドシステム

| 機能名 | 実装状況 | 説明 | 使用方法 |
|--------|----------|------|----------|
| 統一キーバインド | ✅ 完了 | KeyBindingManager による一元管理 | 各種ショートカットキー |
| カスタマイズUI | ✅ 完了 | キー割り当ての変更・保存 | 設定パネル |

### AI 機能

| 機能名 | 実装状況 | 説明 | 使用方法 |
|--------|----------|------|----------|
| モック AI | ✅ 完了 | ランダムなサンプルテキスト生成 | AI タブ → mock プロバイダー |
| OpenAI 統合 | ✅ 完了 | GPT API を使用した物語生成 | AI タブ → openai + API キー |
| 言い換え機能 | ✅ 完了 | パラフレーズレキシコン対応 | 「言い換え」ボタン |
| レキシコンエディタ | ✅ 完了 | デザイナー拡張レキシコンの編集 | AI パネル内 |
| モデル埋め込みレキシコン | ✅ 完了 | `meta.paraphraseLexicon` を起動時に取り込み | モデルJSONの `meta.paraphraseLexicon` |
| AI エラー処理 | ✅ 完了 | API エラー時の適切なフィードバック | 自動表示 |
| バッチ処理 | ✅ 完了 | ノード検索置換、一括編集 | 検索パネル/メニュー |

### Phase 2: グラフエディタ

| 機能名 | 実装状況 | 説明 | 使用方法 |
|--------|----------|------|----------|
| ダイアグラム表示 | ✅ 完了 | Mermaid風のビジュアルノード編集 (Graph Editor) | Graphモード切替 |
| ノード操作 | ✅ 完了 | ドラッグ移動、追加、削除 | マウス操作 |
| ズーム/パン | ✅ 完了 | キャンバスの拡大縮小・移動 | ホイール/ドラッグ |
| ミニマップ | ✅ 完了 | 大規模グラフの全体把握 | 右下パネル |
| Dagre.js レイアウト | ✅ 完了 | 自動レイアウトアルゴリズム | レイアウトボタ |
| マルチエンディング | ✅ 完了 | エンディングパスの可視化 | 「Endings」パネル |

### UI/UX

| 機能名 | 実装状況 | 説明 | 使用方法 |
|--------|----------|------|----------|
| テーマ切替 | ✅ 完了 | 6種類のカラープリセット | テーマボタン |
| SVGアイコン | ✅ 完了 | 統一されたミニマルアイコン | 自動 |

## 📋 実装予定の機能（ロードマップ）

| カテゴリ | 機能名 | 優先度 | 説明 | 見込み時期 |
|---------|--------|--------|------|-----------|
| **AI 機能拡張** | Ollama 統合 | 高 | ローカル LLM の統合（インターネット不要） | Phase 3 |
| カテゴリ | 機能名 | 優先度 | 説明 | 見込み時期 |
|---------|--------|--------|------|-----------|
| **AI 機能拡張** | Ollama 統合 | 高 | ローカル LLM の統合（インターネット不要） | Phase 3 |
| | 生成履歴 | 中 | AI 生成の履歴管理と再利用 | Phase 4 |
| | プロンプトテンプレート | 低 | カスタマイズ可能なプロンプト設定 | Phase 5 |

| カテゴリ | 機能名 | 優先度 | 説明 | 見込み時期 |
|---------|--------|--------|------|-----------|
| **Unity 統合** | UPM パッケージ | 高 | Unity Package Manager 対応 | 実装済み |
| | ランタイムテスト | 中 | NUnit ベースの統合テスト | 次リリース |
| | Editor 拡張 | 低 | Unity Editor でのビジュアル編集 | 将来 |

| カテゴリ | 機能名 | 優先度 | 説明 | 見込み時期 |
|---------|--------|--------|------|-----------|
| **高度な機能** | 変数システム拡張 | 中 | より複雑な変数ロジック | 次リリース |
| | 条件分岐拡張 | 中 | AND/OR 複合条件など | 次リリース |
| | 診断ログ | 低 | 詳細な実行ログ | 将来 |

| カテゴリ | 機能名 | 優先度 | 説明 | 見込み時期 |
|---------|--------|--------|------|-----------|
| カテゴリ | 機能名 | 優先度 | 説明 | 見込み時期 |
|---------|--------|--------|------|-----------|
| **Phase 2** | (完了) | - | Phase 2 機能はすべて実装完了 | - |

| カテゴリ | 機能名 | 優先度 | 説明 | 見込み時期 |
|---------|--------|--------|------|-----------|
| **レキシコン拡張** | GUI クイック追加 | 中 | GUI から直接レキシコン追加 | 次リリース |
| | モデル埋め込み | 中 | `meta.paraphraseLexicon` 対応 | 実装済み (2025-12-11) |
| | JSON スキーマ | 低 | レキシコン検証用スキーマ | 実装済み (2025-12-11) |

## 💡 未実装だが推奨される機能

| カテゴリ | 機能名 | 推奨度 | 理由 | 実装難易度 |
|---------|--------|--------|------|-----------|
| **ユーザー体験** | レスポンシブデザイン | 中 | モバイルデバイス対応 | 中 |
| | アクセシビリティ | 中 | スクリーンリーダー対応など | 中 |

| カテゴリ | 機能名 | 推奨度 | 理由 | 実装難易度 |
|---------|--------|--------|------|-----------|
| **AI 機能拡張** | 生成品質評価 | 中 | AI 出力の品質チェック機能 | 高 |
| | スタイルプリセット | 中 | よく使う AI 設定の保存 | 低 |
| | 生成比較 | 低 | 複数バリエーションの比較表示 | 中 |

| カテゴリ | 機能名 | 推奨度 | 理由 | 実装難易度 |
|---------|--------|--------|------|-----------|
| **開発者機能** | パフォーマンス監視 | 中 | AI API の速度・コスト監視 | 中 |
| | 詳細デバッグモード | 低 | 開発時の詳細情報表示 | 低 |

| カテゴリ | 機能名 | 推奨度 | 理由 | 実装難易度 |
|---------|--------|--------|------|-----------|
| **コラボレーション** | 共有リンク | 中 | モデル共有機能 | 中 |
| | バージョン管理 | 中 | モデルの変更履歴 | 高 |
| | コメント機能 | 低 | ノードへのコメント追加 | 中 |

## 📊 実装状況サマリー

- **完了機能**: 30個以上 ✅
- **実装予定**: 15個 ⏳
- **推奨機能**: 10個 💡

**現在のフォーカス**: Phase 3 準備（AI機能拡張・安定化）
**次のマイルストーン**: Ollama 統合 / エクスポート機能拡張

## 🔧 技術的改善（2025-12-08）

| 改善項目 | 状況 | 説明 |
|----------|------|------|
| CSS 外部化 | ✅ 完了 | `src/styles/main.css`, `gui-editor.css` に分離 |
| レイアウト強制適用 | ✅ 完了 | JS によるランタイムスタイル上書き |
| ドキュメント整理 | ✅ 完了 | 古いファイルを `docs/archive/` に移動 |
