# NarrativeGen Web Tester テストハンズオン

## 概要
NarrativeGen Web Tester はブラウザ上で NarrativeGen エンジンの機能をテストできるツールです。サンプルモデルを使ったインタラクティブなストーリーテリングを体験できます。

## 動作環境
- **URL**: http://localhost:5173/
- **サーバー**: Vite 開発サーバー (npm run dev)
- **ブラウザ**: Chrome/Firefox/Safari (最新版推奨)

## テスト用ハンズオン手順

### 1. 環境起動
```bash
# プロジェクトルートで
cd apps/web-tester
npm run dev
```
ブラウザで http://localhost:5173/ を開く

### 2. 基本サンプル実行
#### 2.1 チュートリアル実行
1. **サンプル選択**: 「サンプル」プルダウン → 「tutorial.json」選択
2. **実行開始**: 「実行開始」ボタンクリック
3. **初期状態確認**:
   - ステータス: 「サンプル tutorial を実行中」
   - ストーリーテキスト: 「ようこそNarrativeGenへ！...」
   - 選択肢: 3つのボタンが表示される

#### 2.2 選択肢テスト
1. **選択肢クリック**: 「選択肢について学ぶ」をクリック
2. **分岐確認**: ストーリーが選択肢に応じて更新される
3. **戻る操作**: 「イントロに戻る」をクリックして最初に戻る

#### 2.3 他のサンプル
- **linear.json**: 直線的なストーリー（2つのノード）
- **complex.json**: 複雑な分岐構造

### 3. ファイルアップロードテスト
1. **JSONファイル選択**: 「ファイル選択」ボタン
2. **アップロード**: ローカルの `.json` ファイルをドロップまたは選択
3. **バリデーション確認**: エラーがなければ実行開始

### 4. 編集機能テスト
#### 4.1 JSONエディタ
1. **エディタタブ**: 「JSON エディタ」タブクリック
2. **編集**: ストーリーテキストや選択肢を変更
3. **適用**: 「JSONを適用」ボタンで変更反映

#### 4.2 GUIエディタ
1. **GUI編集**: 「GUI モデル編集」タブ
2. **ノード追加/編集**: ノードのテキストや選択肢を編集
3. **保存**: 「GUI保存して適用」ボタン

### 5. 高度機能テスト
#### 5.1 AI支援機能
- **言い換え**: テキストを選択して「言い換え」ボタン
- **AI設定**: 右側の「AI設定」タブでプロバイダー設定

#### 5.2 CSVインポート
- **CSVファイル**: Entities.csv をアップロード
- **インポート確認**: モデルにエンティティが追加される

#### 5.3 インベントリ機能（NEW）
- **inventory_demo.json**: インベントリ機能のテスト用サンプル
- **テスト手順**:
  1. 「inventory_demo.json」を選択して実行
  2. 「デバッグ」タブを開く
  3. 「インベントリ」セクションを確認（初期状態は空）
  4. 「剣を拾う」または「ポーションを拾う」を選択
  5. インベントリにアイテムが追加されることを確認
- **確認ポイント**: アイテムID、ブランド、説明が正しく表示される

#### 5.4 グラフ表示
- **グラフタブ**: 「グラフ」タブでストーリー構造を確認
- **ズーム/パン**: マウス操作でグラフを操作

### 6. エラーハンドリングテスト
#### 6.1 バリデーションエラー
- 無効なJSONファイルをアップロード
- エラーパネルが表示されることを確認

#### 6.2 ネットワークエラー
- サーバーを停止して再接続
- 適切なエラーメッセージが表示される

## 簡易チェックリスト

### □ 基本機能
- [ ] サーバー起動 (http://localhost:5173/)
- [ ] tutorial.json サンプル実行
- [ ] 選択肢クリックでストーリー進行
- [ ] ステータスメッセージ表示

### □ サンプルテスト
- [ ] linear.json 実行（2ノードストーリー）
- [ ] complex.json 実行（複数分岐）
- [ ] 各サンプルで選択肢が機能

### □ ファイル操作
- [ ] JSONファイルアップロード
- [ ] CSVファイルインポート
- [ ] ドロップゾーン動作

### □ 編集機能
- [ ] JSONエディタで変更適用
- [ ] GUIエディタでノード編集
- [ ] 変更がストーリーに反映

### □ 高度機能
- [ ] AI言い換え機能
- [ ] グラフ表示
- [ ] インベントリ機能（アイテム追加/表示）
- [ ] エクスポート機能

### □ エラーハンドリング
- [ ] 無効ファイル時のエラー表示
- [ ] ネットワーク切断時の処理
- [ ] バリデーションエラー表示

### □ UI/UX
- [ ] タブ切り替え
- [ ] レスポンシブ対応
- [ ] ダークモード対応（該当する場合）

## トラブルシューティング

### サーバーが起動しない
```bash
# 依存関係インストール
npm install

# キャッシュクリア
npm run dev -- --force
```

### サンプルが読み込めない
- models/examples/ 配下のJSONファイルを確認
- ブラウザの開発者ツールでネットワークエラーを確認
- Vite サーバーを再起動

### 選択肢が動作しない
- コンソールにエラーがないか確認
- モデル構造（nodes, choices）が正しいか検証

## パフォーマンス基準
- **初回ロード**: 3秒以内
- **サンプル実行**: 1秒以内
- **選択肢クリック**: 500ms以内
- **メモリ使用**: 100MB以内

## 完了基準
✅ すべてのチェックリスト項目が通過  
✅ 主要機能がエラーなく動作  
✅ UIが正しく表示され操作可能  
✅ パフォーマンス基準を満たす
