# 今後の開発タスク表

## 📋 **完了済みタスク**

| タスク | ステータス | 完了日 | 詳細 |
|--------|-----------|--------|------|
| ストーリーテキスト改行処理改善 | ✅ 完了 | 2025-10-31 | HTML段落レンダリング実装、`renderStoryEnhanced()`導入 |
| main.js モジュール分割（第1弾） | ✅ 完了 | 2025-10-31 | `handlers/`, `utils/` ディレクトリへの機能分離 |
| OpenSpec 仕様化 | ✅ 完了 | 2025-10-31 | ノード階層構造の技術仕様書作成 |

## 🎯 **優先度順タスク一覧**

| 優先度 | タスク | 対象 | 難易度 | 見積時間 | 依存関係 | 期待効果 |
|--------|--------|------|--------|----------|----------|----------|
| **高** | main.js 分割（第2弾） | web-tester | 中 | 1-2日 | 第1弾完了 | 保守性向上 |
| **高** | ノード階層システム Phase 2 | 全コンポーネント | 高 | 2-3日 | データ構造設計 | 大規模プロジェクト対応 |
| **高** | CI/CD 安定化 | 全プロジェクト | 中 | 1-2日 | 環境整備 | 品質保証 |
| **中** | AI UX 改善（採用ボタン） | web-tester | 中 | 1日 | AI機能実装 | ユーザビリティ向上 |
| **中** | モデル検証強化 | 全コンポーネント | 低 | 0.5日 | 現在の検証 | エラーハンドリング改善 |
| **中** | パフォーマンス最適化 | web-tester | 中 | 1-2日 | 既存実装 | スケーラビリティ向上 |
| **低** | セーブ/ロード機能 | web-tester | 高 | 2-3日 | セッション管理 | ユーザー体験向上 |
| **低** | バッチAI処理 | web-tester | 高 | 2-3日 | AI機能拡張 | 生産性向上 |

## 📊 **タスク詳細**

### **高優先度タスク**

#### **1. main.js 分割（第2弾）**
**サブタスク**:
- A-1: `handlers/nodes-panel.js` 作成（`renderNodeOverview`, `jumpToNode`, `highlightNode`）
- A-2: `handlers/tabs.js` 作成（`switchTab`, タブイベント管理）
- A-3: `handlers/gui-editor.js` 作成（GUI編集モード関連）

**実装方針**:
- 依存注入パターンを採用
- DOM参照とコールバック関数を引数で注入
- main.js は初期化と配線のみに縮小

#### **2. ノード階層システム Phase 2**
**サブタスク**:
- CSVパーサに `node_group` 列対応
- エクスポート側に階層情報出力オプション
- 参照解決関数の実装とテスト
- 後方互換性の確保

**技術仕様**:
- `node_group` 形式: `"chapters/intro"`, `"chapters/main_quest/battlefield"`
- ローカルID解決: `resolveNodeId(model, "battle", ["chapters", "main"])`
- 完全ID形式: `"chapters.main.battle"`

#### **3. CI/CD 安定化**
**課題**:
- web-tester ジョブの lint/build エラー解消
- sdk-unity ジョブの Unity ライセンス設定
- テストカバレッジ向上

**対応策**:
- ESLint/Prettier 設定統一
- 依存関係の lock ファイル管理
- テスト自動化の強化

### **中優先度タスク**

#### **4. AI UX 改善**
- 生成結果の「採用」ボタン実装
- 生成履歴の簡易保持
- バッチ生成インターフェース

#### **5. モデル検証強化**
- ID重複検出の強化
- 参照整合性チェック
- 循環参照検出
- 詳細なエラーメッセージ

#### **6. パフォーマンス最適化**
- 仮想スクロールの改善（現在50件制限）
- グラフ描画の最適化（>100ノード対応）
- CSV処理のチャンキング改善

### **低優先度タスク**

#### **7. セーブ/ロード機能**
- セッション状態のブラウザストレージ保存
- モデル編集状態の自動保存
- 履歴管理とundo/redo

#### **8. バッチAI処理**
- 全ノードの一括言い換え
- 条件付きバッチ生成
- 処理進捗表示

## 📈 **進捗指標**

- **品質**: テストカバレッジ 80% 以上
- **パフォーマンス**: 100ノードモデルで快適動作
- **保守性**: main.js 1000行未満に削減
- **拡張性**: 新機能追加時の影響範囲最小化

---
**更新日**: 2025-11-04
**次回見直し**: 各タスク完了時
